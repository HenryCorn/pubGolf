<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tournament Statistics - Pub Golf VOL.4</title>
    
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    
    <!-- Core Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'forest': '#1B4332',
                        'amber': '#F77F00',
                        'gold': '#FFD700',
                        'cream': '#FEFAE0',
                        'charcoal': '#2D3748'
                    },
                    fontFamily: {
                        'display': ['Playfair Display', 'serif'],
                        'body': ['Inter', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'monospace']
                    }
                }
            }
        }
    </script>
    
    <style>
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .glass-dark {
            background: rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stats-card {
            transition: all 0.3s ease;
        }
        
        .stats-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
        }
        
        .chart-container {
            min-height: 400px;
        }
        
        .metric-card {
            background: linear-gradient(135deg, rgba(247, 127, 0, 0.1), rgba(255, 215, 0, 0.1));
            border: 1px solid rgba(247, 127, 0, 0.3);
        }
        
        .filter-btn {
            transition: all 0.3s ease;
        }
        
        .filter-btn.active {
            background: #F77F00;
            color: white;
        }
        
        .achievement-badge {
            background: linear-gradient(135deg, #FFD700, #F77F00);
            animation: shimmer 2s infinite;
        }
        
        @keyframes shimmer {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-forest to-green-800 text-white font-body min-h-screen">
    <!-- Navigation -->
    <nav class="fixed bottom-0 left-0 right-0 glass-dark z-50">
        <div class="flex justify-around items-center py-3 px-4">
            <a href="index.html" class="flex flex-col items-center text-white/70 hover:text-amber transition-colors">
                <div class="w-6 h-6 mb-1">
                    <svg fill="currentColor" viewBox="0 0 24 24">
                        <path d="M3 13h2v8H3zm4-6h2v14H7zm4-6h2v20h-2zm4 2h2v18h-2zm4 5h2v13h-2z"/>
                    </svg>
                </div>
                <span class="text-xs font-medium">Leaderboard</span>
            </a>
            <a href="admin.html" class="flex flex-col items-center text-white/70 hover:text-amber transition-colors">
                <div class="w-6 h-6 mb-1">
                    <svg fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 1L9 9l-8 .5a1 1 0 0 0-.5 1.7l6 5.5-2 8.5a1 1 0 0 0 1.5 1.1L12 21l5.5 3.6a1 1 0 0 0 1.5-1.1l-2-8.5 6-5.5a1 1 0 0 0-.5-1.7l-8-.5L12 1z"/>
                    </svg>
                </div>
                <span class="text-xs font-medium">Admin</span>
            </a>
            <a href="stats.html" class="flex flex-col items-center text-amber">
                <div class="w-6 h-6 mb-1">
                    <svg fill="currentColor" viewBox="0 0 24 24">
                        <path d="M3 3v18h18v-2H5V3H3zm4 14h2V9H7v8zm4 0h2V7h-2v10zm4 0h2v-4h-2v4z"/>
                    </svg>
                </div>
                <span class="text-xs font-medium">Stats</span>
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 pb-24">
        <!-- Header -->
        <section class="mb-8">
            <div class="glass rounded-2xl p-6 text-center">
                <h1 class="font-display text-3xl font-bold mb-2">Tournament Analytics</h1>
                <p class="text-gray-300">Deep insights into player performance, pub statistics, and tournament trends</p>
                <div class="flex items-center justify-center mt-4">
                    <div class="w-3 h-3 bg-amber rounded-full mr-2"></div>
                    <span class="text-sm">Live Data Analysis</span>
                </div>
            </div>
        </section>

        <!-- Key Metrics -->
        <section class="mb-8">
            <div class="grid md:grid-cols-4 gap-6">
                <div class="metric-card rounded-2xl p-6 text-center">
                    <div class="text-3xl font-bold text-amber mb-2" id="total-players">6</div>
                    <div class="text-sm text-gray-300">Active Players</div>
                </div>
                <div class="metric-card rounded-2xl p-6 text-center">
                    <div class="text-3xl font-bold text-amber mb-2" id="holes-completed">18</div>
                    <div class="text-sm text-gray-300">Holes Completed</div>
                </div>
                <div class="metric-card rounded-2xl p-6 text-center">
                    <div class="text-3xl font-bold text-amber mb-2" id="avg-score">9.2</div>
                    <div class="text-sm text-gray-300">Average Score</div>
                </div>
                <div class="metric-card rounded-2xl p-6 text-center">
                    <div class="text-3xl font-bold text-amber mb-2" id="best-score">3</div>
                    <div class="text-sm text-gray-300">Best Score</div>
                </div>
            </div>
        </section>

        <!-- Performance Overview Chart -->
        <section class="mb-8">
            <div class="glass rounded-2xl p-6">
                <div class="flex items-center justify-between mb-6">
                    <h2 class="font-display text-2xl font-bold">Performance Overview</h2>
                    <div class="flex gap-2">
                        <button class="filter-btn active px-4 py-2 rounded-lg glass text-sm font-medium" data-view="all">All Players</button>
                        <button class="filter-btn px-4 py-2 rounded-lg glass text-sm font-medium" data-view="top3">Top 3</button>
                        <button class="filter-btn px-4 py-2 rounded-lg glass text-sm font-medium" data-view="comparison">Compare</button>
                    </div>
                </div>
                <div id="overview-chart" class="chart-container"></div>
            </div>
        </section>

        <!-- Pub Performance Analysis -->
        <section class="mb-8">
            <div class="glass rounded-2xl p-6">
                <h2 class="font-display text-2xl font-bold mb-6">Pub Performance Analysis</h2>
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="font-semibold mb-4">Average Scores by Pub</h3>
                        <div id="pub-scores-chart" class="chart-container"></div>
                    </div>
                    <div>
                        <h3 class="font-semibold mb-4">Difficulty Ranking</h3>
                        <div id="difficulty-chart" class="chart-container"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Player Statistics -->
        <section class="mb-8">
            <div class="glass rounded-2xl p-6">
                <h2 class="font-display text-2xl font-bold mb-6">Player Statistics</h2>
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="font-semibold mb-4">Individual Performance</h3>
                        <div id="player-performance-chart" class="chart-container"></div>
                    </div>
                    <div>
                        <h3 class="font-semibold mb-4">Score Distribution</h3>
                        <div id="score-distribution-chart" class="chart-container"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Achievements & Records -->
        <section class="mb-8">
            <div class="glass rounded-2xl p-6">
                <h2 class="font-display text-2xl font-bold mb-6">Achievements & Records</h2>
                <div class="grid md:grid-cols-3 gap-6" id="achievements-grid">
                    <!-- Achievements will be populated by JavaScript -->
                </div>
            </div>
        </section>

        <!-- Tournament Trends -->
        <section class="mb-8">
            <div class="glass rounded-2xl p-6">
                <h2 class="font-display text-2xl font-bold mb-6">Tournament Trends</h2>
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="font-semibold mb-4">Progress Over Time</h3>
                        <div id="progress-chart" class="chart-container"></div>
                    </div>
                    <div>
                        <h3 class="font-semibold mb-4">Challenge Performance</h3>
                        <div id="challenge-chart" class="chart-container"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Detailed Statistics Table -->
        <section class="mb-8">
            <div class="glass rounded-2xl p-6">
                <h2 class="font-display text-2xl font-bold mb-6">Detailed Statistics</h2>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead>
                            <tr class="border-b border-white/20">
                                <th class="text-left py-3 px-4">Player</th>
                                <th class="text-left py-3 px-4">Total Score</th>
                                <th class="text-left py-3 px-4">Avg per Hole</th>
                                <th class="text-left py-3 px-4">Best Hole</th>
                                <th class="text-left py-3 px-4">Worst Hole</th>
                                <th class="text-left py-3 px-4">Penalties</th>
                                <th class="text-left py-3 px-4">Bonuses</th>
                            </tr>
                        </thead>
                        <tbody id="stats-table">
                            <!-- Statistics table will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </main>

    <script>
        // Statistics page functionality
        let charts = {};
        let currentView = 'all';
        
        document.addEventListener('DOMContentLoaded', function() {
            initializeStats();
        });
        
        function initializeStats() {
            if (!window.tournamentData) {
                // Load tournament data if not available
                setTimeout(initializeStats, 100);
                return;
            }
            
            updateMetrics();
            initializeCharts();
            renderAchievements();
            renderStatsTable();
            initializeFilters();
        }
        
        function updateMetrics() {
            const data = window.tournamentData;
            
            // Calculate metrics
            const totalPlayers = data.players.length;
            const holesCompleted = data.players.reduce((sum, player) => sum + Object.keys(player.scores).length, 0);
            const avgScore = (data.players.reduce((sum, player) => sum + player.totalScore, 0) / totalPlayers).toFixed(1);
            const bestScore = Math.min(...data.players.map(p => p.totalScore));
            
            // Update display
            document.getElementById('total-players').textContent = totalPlayers;
            document.getElementById('holes-completed').textContent = holesCompleted;
            document.getElementById('avg-score').textContent = avgScore;
            document.getElementById('best-score').textContent = bestScore;
            
            // Animate metrics
            anime({
                targets: '.metric-card',
                scale: [0.9, 1],
                opacity: [0, 1],
                duration: 600,
                delay: anime.stagger(100),
                easing: 'easeOutQuart'
            });
        }
        
        function initializeCharts() {
            // Performance Overview Chart
            charts.overview = echarts.init(document.getElementById('overview-chart'));
            updateOverviewChart();
            
            // Pub Scores Chart
            charts.pubScores = echarts.init(document.getElementById('pub-scores-chart'));
            updatePubScoresChart();
            
            // Difficulty Chart
            charts.difficulty = echarts.init(document.getElementById('difficulty-chart'));
            updateDifficultyChart();
            
            // Player Performance Chart
            charts.playerPerformance = echarts.init(document.getElementById('player-performance-chart'));
            updatePlayerPerformanceChart();
            
            // Score Distribution Chart
            charts.scoreDistribution = echarts.init(document.getElementById('score-distribution-chart'));
            updateScoreDistributionChart();
            
            // Progress Chart
            charts.progress = echarts.init(document.getElementById('progress-chart'));
            updateProgressChart();
            
            // Challenge Chart
            charts.challenge = echarts.init(document.getElementById('challenge-chart'));
            updateChallengeChart();
        }
        
        function updateOverviewChart() {
            const data = window.tournamentData;
            let players = data.players;
            
            if (currentView === 'top3') {
                players = players.sort((a, b) => a.totalScore - b.totalScore).slice(0, 3);
            }
            
            const series = players.map(player => ({
                name: player.name.split(' ')[1],
                type: 'line',
                data: data.pubs.map(pub => {
                    const score = player.scores[pub.id];
                    return score ? score.total : null;
                }),
                smooth: true,
                symbol: 'circle',
                symbolSize: 8,
                lineStyle: { width: 3 }
            }));
            
            const option = {
                title: {
                    text: currentView === 'top3' ? 'Top 3 Players Performance' : 'All Players Performance',
                    left: 'center',
                    textStyle: { color: '#FFFFFF', fontSize: 16 }
                },
                tooltip: {
                    trigger: 'axis',
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    borderColor: '#F77F00',
                    textStyle: { color: '#FFFFFF' }
                },
                legend: {
                    bottom: 10,
                    textStyle: { color: '#FFFFFF' }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '15%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: data.pubs.map(pub => pub.name.split(' ')[0]),
                    axisLabel: { color: '#FFFFFF', rotate: 45 }
                },
                yAxis: {
                    type: 'value',
                    name: 'Score',
                    nameTextStyle: { color: '#FFFFFF' },
                    axisLabel: { color: '#FFFFFF' }
                },
                series: series,
                color: ['#F77F00', '#FFD700', '#1B4332', '#2D5A3D', '#8B4513', '#4682B4']
            };
            
            charts.overview.setOption(option);
        }
        
        function updatePubScoresChart() {
            const data = window.tournamentData;
            const pubData = data.pubs.map(pub => {
                const scores = data.players.map(player => {
                    const score = player.scores[pub.id];
                    return score ? score.total : 0;
                });
                const avgScore = scores.reduce((sum, score) => sum + score, 0) / scores.length;
                return { name: pub.name.split(' ')[0], value: avgScore };
            });
            
            const option = {
                title: {
                    text: 'Average Scores by Pub',
                    left: 'center',
                    textStyle: { color: '#FFFFFF', fontSize: 14 }
                },
                tooltip: {
                    trigger: 'axis',
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    borderColor: '#F77F00',
                    textStyle: { color: '#FFFFFF' }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '10%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: pubData.map(item => item.name),
                    axisLabel: { color: '#FFFFFF', rotate: 45 }
                },
                yAxis: {
                    type: 'value',
                    name: 'Avg Score',
                    nameTextStyle: { color: '#FFFFFF' },
                    axisLabel: { color: '#FFFFFF' }
                },
                series: [{
                    type: 'bar',
                    data: pubData.map(item => item.value),
                    itemStyle: {
                        color: '#F77F00',
                        borderRadius: [4, 4, 0, 0]
                    }
                }]
            };
            
            charts.pubScores.setOption(option);
        }
        
        function updateDifficultyChart() {
            const data = window.tournamentData;
            const difficultyData = data.pubs.map(pub => {
                const scores = data.players.map(player => {
                    const score = player.scores[pub.id];
                    return score ? score.total : 0;
                });
                const avgScore = scores.reduce((sum, score) => sum + score, 0) / scores.length;
                return { name: pub.name, value: avgScore };
            }).sort((a, b) => b.value - a.value);
            
            const option = {
                title: {
                    text: 'Pub Difficulty Ranking',
                    left: 'center',
                    textStyle: { color: '#FFFFFF', fontSize: 14 }
                },
                tooltip: {
                    trigger: 'item',
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    borderColor: '#F77F00',
                    textStyle: { color: '#FFFFFF' }
                },
                series: [{
                    type: 'pie',
                    radius: ['40%', '70%'],
                    data: difficultyData.map((item, index) => ({
                        name: `${index + 1}. ${item.name}`,
                        value: item.value
                    })),
                    itemStyle: {
                        borderRadius: 8,
                        borderColor: '#fff',
                        borderWidth: 2
                    },
                    label: {
                        color: '#FFFFFF',
                        fontSize: 12
                    }
                }],
                color: ['#F77F00', '#FFD700', '#1B4332', '#2D5A3D', '#8B4513', '#4682B4', '#DC143C']
            };
            
            charts.difficulty.setOption(option);
        }
        
        function updatePlayerPerformanceChart() {
            const data = window.tournamentData;
            const playerData = data.players.map(player => ({
                name: player.name.split(' ')[1],
                value: player.totalScore
            })).sort((a, b) => a.value - b.value);
            
            const option = {
                title: {
                    text: 'Player Performance Ranking',
                    left: 'center',
                    textStyle: { color: '#FFFFFF', fontSize: 14 }
                },
                tooltip: {
                    trigger: 'axis',
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    borderColor: '#F77F00',
                    textStyle: { color: '#FFFFFF' }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '10%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: playerData.map(item => item.name),
                    axisLabel: { color: '#FFFFFF', rotate: 45 }
                },
                yAxis: {
                    type: 'value',
                    name: 'Total Score',
                    nameTextStyle: { color: '#FFFFFF' },
                    axisLabel: { color: '#FFFFFF' }
                },
                series: [{
                    type: 'bar',
                    data: playerData.map(item => item.value),
                    itemStyle: {
                        color: (params) => params.data < 10 ? '#4CAF50' : params.data < 20 ? '#F77F00' : '#F44336',
                        borderRadius: [4, 4, 0, 0]
                    }
                }]
            };
            
            charts.playerPerformance.setOption(option);
        }
        
        function updateScoreDistributionChart() {
            const data = window.tournamentData;
            const scoreRanges = {
                'Under Par (<0)': 0,
                'Par (0-5)': 0,
                'Bogey (6-15)': 0,
                'Double Bogey+ (16+)': 0
            };
            
            data.players.forEach(player => {
                if (player.totalScore < 0) scoreRanges['Under Par (<0)']++;
                else if (player.totalScore <= 5) scoreRanges['Par (0-5)']++;
                else if (player.totalScore <= 15) scoreRanges['Bogey (6-15)']++;
                else scoreRanges['Double Bogey+ (16+)']++;
            });
            
            const option = {
                title: {
                    text: 'Score Distribution',
                    left: 'center',
                    textStyle: { color: '#FFFFFF', fontSize: 14 }
                },
                tooltip: {
                    trigger: 'item',
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    borderColor: '#F77F00',
                    textStyle: { color: '#FFFFFF' }
                },
                series: [{
                    type: 'pie',
                    radius: '70%',
                    data: Object.entries(scoreRanges).map(([name, value]) => ({ name, value })),
                    itemStyle: {
                        borderRadius: 8,
                        borderColor: '#fff',
                        borderWidth: 2
                    },
                    label: {
                        color: '#FFFFFF',
                        fontSize: 12
                    }
                }],
                color: ['#4CAF50', '#F77F00', '#FFD700', '#F44336']
            };
            
            charts.scoreDistribution.setOption(option);
        }
        
        function updateProgressChart() {
            const data = window.tournamentData;
            const progressData = data.pubs.map((pub, index) => {
                const completedHoles = index + 1;
                const avgScore = data.players.reduce((sum, player) => {
                    let playerSum = 0;
                    for (let i = 0; i <= index && i < data.pubs.length; i++) {
                        const pubId = data.pubs[i].id;
                        const score = player.scores[pubId];
                        if (score) playerSum += score.total;
                    }
                    return sum + playerSum;
                }, 0) / data.players.length;
                
                return { name: `Hole ${completedHoles}`, value: avgScore };
            });
            
            const option = {
                title: {
                    text: 'Tournament Progress',
                    left: 'center',
                    textStyle: { color: '#FFFFFF', fontSize: 14 }
                },
                tooltip: {
                    trigger: 'axis',
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    borderColor: '#F77F00',
                    textStyle: { color: '#FFFFFF' }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '10%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: progressData.map(item => item.name),
                    axisLabel: { color: '#FFFFFF' }
                },
                yAxis: {
                    type: 'value',
                    name: 'Cumulative Avg Score',
                    nameTextStyle: { color: '#FFFFFF' },
                    axisLabel: { color: '#FFFFFF' }
                },
                series: [{
                    type: 'line',
                    data: progressData.map(item => item.value),
                    smooth: true,
                    symbol: 'circle',
                    symbolSize: 8,
                    lineStyle: { width: 3, color: '#F77F00' },
                    areaStyle: {
                        color: {
                            type: 'linear',
                            x: 0, y: 0, x2: 0, y2: 1,
                            colorStops: [
                                { offset: 0, color: 'rgba(247, 127, 0, 0.3)' },
                                { offset: 1, color: 'rgba(247, 127, 0, 0.1)' }
                            ]
                        }
                    }
                }]
            };
            
            charts.progress.setOption(option);
        }
        
        function updateChallengeChart() {
            const data = window.tournamentData;
            const challengeData = data.pubs.map(pub => {
                const scores = data.players.map(player => {
                    const score = player.scores[pub.id];
                    return score ? score.total : 0;
                });
                const avgScore = scores.reduce((sum, score) => sum + score, 0) / scores.length;
                return { name: pub.challenge, value: avgScore };
            });
            
            const option = {
                title: {
                    text: 'Challenge Performance',
                    left: 'center',
                    textStyle: { color: '#FFFFFF', fontSize: 14 }
                },
                tooltip: {
                    trigger: 'item',
                    backgroundColor: 'rgba(0, 0, 0, 0.8)',
                    borderColor: '#F77F00',
                    textStyle: { color: '#FFFFFF' }
                },
                series: [{
                    type: 'pie',
                    radius: ['30%', '70%'],
                    data: challengeData.map(item => ({
                        name: item.name,
                        value: item.value
                    })),
                    itemStyle: {
                        borderRadius: 8,
                        borderColor: '#fff',
                        borderWidth: 2
                    },
                    label: {
                        color: '#FFFFFF',
                        fontSize: 10
                    }
                }],
                color: ['#F77F00', '#FFD700', '#1B4332', '#2D5A3D', '#8B4513', '#4682B4', '#DC143C']
            };
            
            charts.challenge.setOption(option);
        }
        
        function renderAchievements() {
            const data = window.tournamentData;
            const achievements = [
                {
                    title: 'Lowest Score',
                    player: data.players.sort((a, b) => a.totalScore - b.totalScore)[0],
                    description: 'Best overall tournament performance',
                    icon: 'ðŸ†'
                },
                {
                    title: 'Most Consistent',
                    player: data.players.reduce((prev, curr) => {
                        const prevScores = Object.values(prev.scores);
                        const currScores = Object.values(curr.scores);
                        const prevVariance = prevScores.reduce((sum, score) => sum + Math.abs(score.total - prev.totalScore), 0);
                        const currVariance = currScores.reduce((sum, score) => sum + Math.abs(score.total - curr.totalScore), 0);
                        return currVariance < prevVariance ? curr : prev;
                    }),
                    description: 'Most consistent performance across holes',
                    icon: 'ðŸŽ¯'
                },
                {
                    title: 'Best Recovery',
                    player: data.players.sort((a, b) => {
                        const aBest = Math.min(...Object.values(a.scores).map(s => s.total));
                        const bBest = Math.min(...Object.values(b.scores).map(s => s.total));
                        return aBest - bBest;
                    })[0],
                    description: 'Best single hole performance',
                    icon: 'ðŸš€'
                }
            ];
            
            document.getElementById('achievements-grid').innerHTML = achievements.map(achievement => `
                <div class="achievement-badge rounded-xl p-6 text-center text-black">
                    <div class="text-3xl mb-2">${achievement.icon}</div>
                    <h3 class="font-bold text-lg mb-2">${achievement.title}</h3>
                    <p class="text-sm font-semibold mb-1">${achievement.player.name}</p>
                    <p class="text-xs opacity-80">${achievement.description}</p>
                </div>
            `).join('');
        }
        
        function renderStatsTable() {
            const data = window.tournamentData;
            const sortedPlayers = [...data.players].sort((a, b) => a.totalScore - b.totalScore);
            
            document.getElementById('stats-table').innerHTML = sortedPlayers.map(player => {
                const scores = Object.values(player.scores);
                const avgPerHole = scores.length > 0 ? (player.totalScore / scores.length).toFixed(1) : '0.0';
                const bestHole = scores.length > 0 ? Math.min(...scores.map(s => s.total)) : 0;
                const worstHole = scores.length > 0 ? Math.max(...scores.map(s => s.total)) : 0;
                const totalPenalties = scores.reduce((sum, score) => sum + score.penalties, 0);
                const totalBonuses = scores.reduce((sum, score) => sum + score.bonuses, 0);
                
                return `
                    <tr class="border-b border-white/10 hover:bg-white/5 transition-colors">
                        <td class="py-3 px-4">
                            <div class="flex items-center space-x-3">
                                <span class="text-lg">${player.avatar}</span>
                                <div>
                                    <div class="font-semibold">${player.name}</div>
                                    <div class="text-xs text-gray-400">#${player.id}</div>
                                </div>
                            </div>
                        </td>
                        <td class="py-3 px-4">
                            <span class="font-bold ${player.totalScore < 10 ? 'text-green-400' : player.totalScore < 20 ? 'text-amber' : 'text-red-400'}">
                                ${player.totalScore}
                            </span>
                        </td>
                        <td class="py-3 px-4">${avgPerHole}</td>
                        <td class="py-3 px-4">
                            <span class="text-green-400 font-bold">${bestHole}</span>
                        </td>
                        <td class="py-3 px-4">
                            <span class="text-red-400 font-bold">${worstHole}</span>
                        </td>
                        <td class="py-3 px-4">${totalPenalties}</td>
                        <td class="py-3 px-4">${totalBonuses}</td>
                    </tr>
                `;
            }).join('');
        }
        
        function initializeFilters() {
            document.querySelectorAll('.filter-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Remove active class from all buttons
                    document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
                    
                    // Add active class to clicked button
                    this.classList.add('active');
                    
                    // Update current view
                    currentView = this.dataset.view;
                    
                    // Update charts
                    updateOverviewChart();
                });
            });
        }
        
        // Resize charts on window resize
        window.addEventListener('resize', () => {
            Object.values(charts).forEach(chart => {
                if (chart && chart.resize) {
                    chart.resize();
                }
            });
        });
        
        // Initialize animations
        anime({
            targets: '.stats-card',
            translateY: [50, 0],
            opacity: [0, 1],
            duration: 600,
            delay: anime.stagger(100),
            easing: 'easeOutQuart'
        });
    </script>
    
    <script src="main.js"></script>
</body>
</html>